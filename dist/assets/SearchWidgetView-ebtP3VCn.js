import{d as H,r,N as A,T as b,B as i,a as x,C as B,b as f,c as O,u as S,e as _,w as k,S as h,O as E,o as v,f as w,g as m,t as N,F as P,h as $,i as l,_ as F}from"./index-s5Dfv127.js";import{s as y,a as I}from"./SearchPlatform-Qv9BxV8O.js";const D=H("searchWindowStore",()=>{const u=r(600),a=r(56),s=r(!1),o=r(0),c=r(o.value-a.value);let n=-1;function t(){clearTimeout(n)}function e(){t(),n=window.setTimeout(()=>{g()},3e3)}async function d(){return(await i.getPosition()).y<=c.value}const p=A({duration:500,transition:b.easeOutCubic,onStarted:async()=>{await i.showInactive()},onFinished:async()=>{await d()&&(s.value=!1,await i.hide())}}),T=async()=>{await i.showInactive(),p.animate(o.value),s.value=!0,e()},g=async()=>{p.animate(c.value)};async function C(){await i.setup({width:u.value,height:a.value,maxHeight:a.value,maxWidth:u.value,movable:!1,resizable:!1,alwaysOnTop:!0}),await i.alignToScreen("top-center"),await i.setPosition({y:o.value}),e()}return{show:T,showing:s,hide:g,isHide:d,clearHideTimer:t,startHideTimer:e,setup:C}}),L={class:"content"},M={class:"actions"},V=["onClick"],Y=["src","alt"],G=x({__name:"SearchWidgetView",setup(u){const a=r(""),s=D();s.setup(),B([f.CHANGED,O.FOCUS],async n=>{n.event==f.CHANGED&&(a.value=n.payload.content,await i.setAlwaysOnTop(!0),s.show())});const o=S(`${_.name}.shortcut`,"Meta+Alt+S",{listenToStorageChanges:!0}),c=S(`${_.name}.platform`,"google",{listenToStorageChanges:!0});return k(o,(n,t)=>{h.unregister(t),h.register(n)}),h.register(o.value),E(()=>{a.value&&y(c.value,a.value)}),(n,t)=>(v(),w("div",{class:"hover-wrapper",onMouseenter:t[0]||(t[0]=e=>l(s).clearHideTimer()),onMouseleave:t[1]||(t[1]=e=>l(s).startHideTimer())},[m("div",L,N(a.value),1),m("div",M,[(v(!0),w(P,null,$(l(I),e=>(v(),w("div",{key:e.value,class:"search-engine",onClick:d=>l(y)(e.value,a.value)},[m("img",{src:e.icon,alt:e.title},null,8,Y)],8,V))),128))])],32))}}),j=F(G,[["__scopeId","data-v-b0ad85c8"]]);export{j as default};
